import{c as ee}from"/myst_assets_folder/_shared/chunk-U6EGTKUF.js";import{a as xt}from"/myst_assets_folder/_shared/chunk-X3SRJYZW.js";import{A as ue,B as ve,C as N,F as we,a as _e,b as P,c as Q,e as K,j as ye,t as U}from"/myst_assets_folder/_shared/chunk-XZQAKIX3.js";import{e as bt}from"/myst_assets_folder/_shared/chunk-2NH4LW52.js";function St(i="node"){return{class:{type:String,doc:`Annotate the ${i} with a set of space-delimited class names.`}}}function It(i="node"){return{label:{type:String,alias:["name"],doc:`Label the ${i} to be cross-referenced or explicitly linked to.`}}}function Dt(i="node"){return{enumerated:{type:Boolean,alias:["numbered"],doc:`Turn on/off the numbering for the specific ${i}`},enumerator:{type:String,alias:["number"],doc:`Explicitly set the ${i} number`}}}function m(i="node"){return{...St(i),...It(i),...Dt(i)}}function Et(i,e){var t;return typeof((t=i.options)===null||t===void 0?void 0:t.class)=="string"&&(e.class=i.options.class),e}function Ot(i,e){var t;let{label:n,identifier:r}=K((t=i.options)===null||t===void 0?void 0:t.label)||{};return n&&(e.label=n),r&&(e.identifier=r),e}function Ct(i,e){var t,n;return typeof((t=i.options)===null||t===void 0?void 0:t.enumerated)=="boolean"&&(e.enumerated=i.options.enumerated),!((n=i.options)===null||n===void 0)&&n.enumerator&&(e.enumerator=i.options.enumerator),e}function h(i,e){return Et(i,e),Ot(i,e),Ct(i,e),e}var be={name:"admonition",doc:'Callouts, or "admonitions", highlight a particular block of text that exists slightly apart from the narrative of your page, such as a note or a warning. \n\n The admonition kind can be determined by the directive name used (e.g. `:::{tip}` or `:::{note}`).',alias:["attention","caution","danger","error","important","hint","note","seealso","tip","warning",".callout-note",".callout-warning",".callout-important",".callout-tip",".callout-caution"],arg:{type:"myst",doc:`The optional title of the admonition, if not supplied the admonition kind will be used.

Note that the argument parsing is different from Sphinx, which does not allow named admonitions to have custom titles.`},options:{...m("admonition"),class:{type:String,doc:'CSS classes to add to your admonition. Special classes include:\n\n- `dropdown`: turns the admonition into a `<details>` html element\n- `simple`: an admonition with "simple" styles\n- the name of an admonition, the first valid admonition name encountered will be used (e.g. `tip`). Note that if you provide conflicting class names, the first valid admonition name will be used.'},icon:{type:Boolean,doc:"Setting icon to false will hide the icon."},open:{type:Boolean,doc:"Turn the admonition into a dropdown, if it isn't already, and set the open state."}},body:{type:"myst",doc:"The body of the admonition. If there is no title and the body starts with bold text or a heading, that content will be used as the admonition title."},run(i){var e,t,n,r,s;let o=[];i.arg&&o.push({type:i.body?"admonitionTitle":"paragraph",children:i.arg}),i.body&&o.push(...i.body);let l={type:"admonition",kind:i.name!=="admonition"?i.name.replace(".callout-",""):void 0,children:o};return((e=i.options)===null||e===void 0?void 0:e.icon)===!1&&(l.icon=!1),h(i,l),typeof((t=i.options)===null||t===void 0?void 0:t.open)=="boolean"&&(!((n=l.class)===null||n===void 0)&&n.split(" ").includes("dropdown")||(l.class=`${(r=l.class)!==null&&r!==void 0?r:""} dropdown`.trim()),!((s=i.options)===null||s===void 0)&&s.open&&(l.open=!0)),[l]}};var xe={name:"bibliography",options:{...m("bibliography"),filter:{type:String}},run(i){var e;let t={type:"bibliography",filter:(e=i.options)===null||e===void 0?void 0:e.filter};return h(i,t),[t]}};function Tt(i){return i?i?.split(",").map(t=>Number(t.trim())).filter(t=>Number.isInteger(t)):void 0}function ce(i,e,t){var n;let{options:r,node:s}=i;r?.["lineno-start"]!=null&&r?.["number-lines"]!=null&&Q(e,'Cannot use both "lineno-start" and "number-lines"',{node:(n=U('mystDirectiveOption[name="number-lines"]',s))!==null&&n!==void 0?n:s,source:"code-block:options",ruleId:N.directiveOptionsCorrect});let o=Tt(r?.["emphasize-lines"]),l=r?.["number-lines"],u=r?.linenos||r?.["lineno-start"]||r?.["lineno-match"]||l?!0:void 0,c=l!=null&&l>1?l:r?.["lineno-start"];r?.["lineno-match"]?c="match":(c==null||c<=1)&&(c=void 0);let f=r?.filename;return f?.toLowerCase()==="false"?f=void 0:!f&&t&&(f=t),{emphasizeLines:o,showLineNumbers:u,startingLineNumber:c,filename:f}}var fe={caption:{type:"myst",doc:"A parsed caption for the code block."},linenos:{type:Boolean,doc:"Show line numbers"},"lineno-start":{type:Number,doc:"Start line numbering from a particular value, default is 1. If present, line numbering is activated."},"number-lines":{type:Number,doc:'Alternative for "lineno-start", turns on line numbering and can be an integer that is the start of the line numbering.'},"emphasize-lines":{type:String,doc:'Emphasize particular lines (comma-separated numbers), e.g. "3,5"'},filename:{type:String,doc:"Show the filename in addition to the rendered code. The `include` directive will use the filename by default, to turn off this default set the filename to `false`."}};function Se(i,e,t){var n,r;if(!i)return;if(typeof i=="string"&&i.startsWith("[")&&i.endsWith("]"))try{return Se(ee.load(i),e,t)}catch{P(e,"Could not load tags for code-cell directive",{node:(n=U('mystDirectiveOption[name="tags"]',t))!==null&&n!==void 0?n:t,source:"code-cell:tags",ruleId:N.directiveOptionsCorrect});return}if(typeof i=="string"){let o=i.split(/[,\s]/).map(l=>l.trim()).filter(l=>!!l);return o.length>0?o:void 0}if(!Array.isArray(i))return;let s=i;if(s&&Array.isArray(s)&&s.every(o=>typeof o=="string")){if(s.length>0)return s.map(o=>o.trim()).filter(o=>!!o)}else if(s){Q(e,"tags in code-cell directive must be a list of strings",{node:(r=U('mystDirectiveOption[name="tags"]',t))!==null&&r!==void 0?r:t,source:"code-cell:tags",ruleId:N.directiveOptionsCorrect});return}}var Ie={name:"code",doc:"A code-block environment with a language as the argument, and options for highlighting, showing line numbers, and an optional filename.",alias:["code-block","sourcecode"],arg:{type:String,doc:"Code language, for example `python` or `typescript`"},options:{...m("code"),...fe},body:{type:String,doc:"The raw code to display for the code block."},run(i,e){var t;let n=ce(i,e),r={type:"code",lang:i.arg,...n,value:i.body};if(!(!((t=i.options)===null||t===void 0)&&t.caption))return h(i,r),[r];let s={type:"caption",children:[{type:"paragraph",children:i.options.caption}]},o={type:"container",kind:"code",children:[r,s]};return h(i,o),[o]}},De={name:"code-cell",doc:"An executable code cell",arg:{type:String,doc:"Language for execution and display, for example `python`. It will default to the language of the notebook or containing markdown file."},options:{...m("code-cell"),caption:{type:"myst",doc:"A parsed caption for the code output."},tags:{type:String,alias:["tag"],doc:"A comma-separated list of tags to add to the cell, for example, `remove-input` or `hide-cell`."}},body:{type:String,doc:"The code to be executed and displayed."},run(i,e){var t,n,r;let s={type:"code",lang:i.arg,executable:!0,value:(t=i.body)!==null&&t!==void 0?t:""},o={type:"output",id:_e(),data:[]},l={type:"block",kind:we.code,children:[s,o],data:{}};h(i,l),!((n=i.options)===null||n===void 0)&&n.caption&&(l.data.caption=[{type:"paragraph",children:i.options.caption}]);let u=Se((r=i.options)===null||r===void 0?void 0:r.tags,e,i.node);return u&&(l.data.tags=u),[l]}};var Ee={name:"dropdown",arg:{type:"myst"},options:{...m("dropdown"),open:{type:Boolean,doc:"When true, the dropdown starts open."}},body:{type:"myst",required:!0},run(i){var e;let t=[];i.arg&&t.push({type:"summary",children:i.arg}),t.push(...i.body);let n={type:"details",open:(e=i.options)===null||e===void 0?void 0:e.open,children:t};return h(i,n),[n]}};var Oe={name:"embed",doc:"The embed directive allows you to duplicate content from another part of your project. This can also be done through the figure directive.",arg:{type:String,doc:"The label of the node that you are embedding.",required:!0},options:{...m("embed"),"remove-input":{type:Boolean,doc:"If embedding a Jupyter Notebook cell, remove the input of the cell."},"remove-output":{type:Boolean,doc:"If embedding a Jupyter Notebook cell, remove the output of the cell."}},run(i){var e,t;if(!i.arg)return[];let n=i.arg,r=n.startsWith("#")?n.substring(1):n,{label:s}=K(r)||{};if(!s)return[];let o={type:"embed",source:{label:s},"remove-input":(e=i.options)===null||e===void 0?void 0:e["remove-input"],"remove-output":(t=i.options)===null||t===void 0?void 0:t["remove-output"]};return h(i,o),[o]}};var Ce={name:"figure",arg:{type:String,doc:"The filename of an image (e.g. `my-fig.png`), or an ID of a Jupyter Notebook cell (e.g. `#my-cell`)."},options:{...m("figure"),class:{type:String,alias:["figclass"],doc:"CSS classes to add to your figure. Special classes include:\n\n- `full-width`: changes the figure environment to cover two columns in LaTeX"},height:{type:String,doc:"The figure height, in CSS units, for example `4em` or `300px`.",alias:["h"]},width:{type:String,alias:["w","figwidth"],doc:"The figure width, in CSS units, for example `50%` or `300px`."},alt:{type:String,doc:"Alternative text for the image"},align:{type:String,doc:"The alignment of the image in the figure. Choose one of `left`, `center` or `right`"},"remove-input":{type:Boolean,doc:"If the argument is a notebook cell, use this flag to remove the input code from the cell."},"remove-output":{type:Boolean,doc:"If the argument is a notebook cell, use this flag to remove the output from the cell."},placeholder:{type:String,doc:"A placeholder image when using a notebook cell as the figure contents. This will be shown in place of the Jupyter output until an execution environment is attached. It will also be used in static outputs, such as a PDF output."},"no-subfigures":{type:Boolean,doc:"Disallow implicit subfigure creation from child nodes",alias:["no-subfig","no-subfigure"]},kind:{type:String,doc:'Override the figures "kind", which changes the enumeration to start counting independently for that kind. For example, `kind: "example"`. The default enumeration and referencing will be the capitalized `kind` followed by a number (e.g. "Example 1").'}},body:{type:"myst",doc:"If an argument is provided to the figure directive, the body will be the figure caption. You may also omit the figure directive argument and provide images in the body of the figure, these will be parsed into sub figures."},run(i){var e,t,n,r,s,o,l,u,c,f,d,_,y;let x=[];i.arg&&x.push({type:"image",url:i.arg,alt:(e=i.options)===null||e===void 0?void 0:e.alt,width:(t=i.options)===null||t===void 0?void 0:t.width,height:(n=i.options)===null||n===void 0?void 0:n.height,align:(r=i.options)===null||r===void 0?void 0:r.align,"remove-input":(s=i.options)===null||s===void 0?void 0:s["remove-input"],"remove-output":(o=i.options)===null||o===void 0?void 0:o["remove-output"]}),!((l=i.options)===null||l===void 0)&&l.placeholder&&x.push({type:"image",placeholder:!0,url:i.options.placeholder,alt:(u=i.options)===null||u===void 0?void 0:u.alt,width:(c=i.options)===null||c===void 0?void 0:c.width,height:(f=i.options)===null||f===void 0?void 0:f.height,align:(d=i.options)===null||d===void 0?void 0:d.align}),i.body&&x.push(...i.body);let g={type:"container",kind:((_=i.options)===null||_===void 0?void 0:_.kind)||"figure",children:x};return h(i,g),!((y=i.options)===null||y===void 0)&&y["no-subfigures"]&&(g.noSubcontainers=!0),[g]}};var Te={name:"iframe",arg:{type:String,doc:"The URL source (`src`) of the HTML iframe element.",required:!0},options:{...m("iframe"),width:{type:String,doc:"The iframe width, in CSS units, for example `50%` or `300px`."},align:{type:String,doc:"The alignment of the iframe in the page. Choose one of `left`, `center` or `right`"},placeholder:{type:String,doc:"A placeholder image for the iframe in static exports."}},body:{type:"myst",doc:"If provided, this will be the iframe caption."},run(i){var e,t,n,r,s,o,l;let u={type:"iframe",src:i.arg,width:(e=i.options)===null||e===void 0?void 0:e.width,align:(t=i.options)===null||t===void 0?void 0:t.align};if(!((n=i.options)===null||n===void 0)&&n.placeholder&&(u.children=[{type:"image",placeholder:!0,url:i.options.placeholder,alt:(r=i.options)===null||r===void 0?void 0:r.alt,width:(s=i.options)===null||s===void 0?void 0:s.width,height:(o=i.options)===null||o===void 0?void 0:o.height,align:(l=i.options)===null||l===void 0?void 0:l.align}]),!i.body)return h(i,u),[u];let c={type:"container",kind:"figure",children:[u,{type:"caption",children:i.body}]};return h(i,c),[c]}};var Ae={name:"image",arg:{type:String,doc:"The filename of an image (e.g. `my-fig.png`).",required:!0},options:{...m("image"),height:{type:String,doc:"The image height, in CSS units, for example `4em` or `300px`.",alias:["h"]},width:{type:String,alias:["w"],doc:"The image width, in CSS units, for example `50%` or `300px`."},alt:{type:String,doc:"Alternative text for the image"},align:{type:String,doc:"The alignment of the image. Choose one of `left`, `center` or `right`"},title:{type:String,doc:"Title text for the image"}},run(i){let{alt:e,height:t,width:n,align:r,title:s}=i.options||{},o={type:"image",url:i.arg,alt:e??(i.body?ye(i.body):void 0),title:s,height:t,width:n,align:r??"center"};return h(i,o),[o]}};var Ne={name:"include",alias:["literalinclude"],doc:"Allows you to include the source or parsed version of a separate file into your document tree.",arg:{type:String,doc:"The file path, which is relative to the file from which it was referenced.",required:!0},options:{...m("include"),literal:{type:Boolean,doc:"Flag the include block as literal, and show the contents as a code block. This can also be set automatically by setting the `language` or using the `literalinclude` directive."},lang:{type:String,doc:"The language of the code to be highlighted as. If set, this automatically changes an `include` into a `literalinclude`.",alias:["language","code"]},...fe,"start-line":{type:Number,doc:"Only the content starting from this line will be included. The first line has index 0 and negative values count from the end."},"start-at":{type:String,doc:"Only the content after and including the first occurrence of the specified text in the external data file will be included."},"start-after":{type:String,doc:"Only the content after the first occurrence of the specified text in the external data file will be included."},"end-line":{type:Number,doc:"Only the content up to (but excluding) this line will be included."},"end-at":{type:String,doc:"Only the content up to and including the first occurrence of the specified text in the external data file (but after any start-after text) will be included."},"end-before":{type:String,doc:"Only the content before the first occurrence of the specified text in the external data file (but after any start-after text) will be included."},lines:{type:String,doc:"Specify exactly which lines to include from the original file, starting at 1. For example, `1,3,5-10,20-` includes the lines 1, 3, 5 to 10 and lines 20 to the last line of the original file."},"lineno-match":{type:Boolean,doc:"Display the original line numbers, correct only when the selection consists of contiguous lines."}},run(i,e){var t,n,r,s,o,l,u,c,f,d,_,y,x,g;let O=i.name==="literalinclude"||!!(!((t=i.options)===null||t===void 0)&&t.literal)||!!(!((n=i.options)===null||n===void 0)&&n.lang),S=i.arg;if(!O){let B={type:"include",file:S};return h(i,B),[B]}let I=(s=(r=i.options)===null||r===void 0?void 0:r.lang)!==null&&s!==void 0?s:Rt(S.split(".").pop()),w=ce(i,e,S.split(/\/|\\/).pop()),D={};if(Re(i,e,["start-at","start-line","start-after","lines"]),Re(i,e,["end-at","end-line","end-before","lines"]),D.startAt=(o=i.options)===null||o===void 0?void 0:o["start-at"],D.startAfter=(l=i.options)===null||l===void 0?void 0:l["start-after"],D.endAt=(u=i.options)===null||u===void 0?void 0:u["end-at"],D.endBefore=(c=i.options)===null||c===void 0?void 0:c["end-before"],!((f=i.options)===null||f===void 0)&&f.lines)D.lines=At(e,(d=U('mystDirectiveOption[name="lines"]',i.node))!==null&&d!==void 0?d:void 0,(_=i.options)===null||_===void 0?void 0:_.lines);else{let B=(y=i.options)===null||y===void 0?void 0:y["start-line"],W=(x=i.options)===null||x===void 0?void 0:x["end-line"],L=[];B!=null&&L.push(B),B==null&&W!=null&&L.push(0),W!=null&&L.push(W),L.length>0&&(D.lines=[L.map(G=>G>=0?G+1:G)])}let A={type:"include",file:S,literal:O,lang:I,caption:(g=i.options)===null||g===void 0?void 0:g.caption,filter:Object.keys(D).length>0?D:void 0,...w};return h(i,A),[A]}};function At(i,e,t){if(t)return t.split(",").map(n=>{let r=n.trim(),s=r.match(/^([0-9]+)(?:\s*(-)\s*([0-9]+)?)?$/);if(!s){Q(i,`Unknown lines match "${r}"`,{node:e,ruleId:N.directiveOptionsCorrect});return}let[,o,l,u]=s;return!l&&!u?Number.parseInt(o):l&&!u?[Number.parseInt(o)]:[Number.parseInt(o),Number.parseInt(u)]}).filter(n=>!!n)}function Re(i,e,t){let{options:n,node:r}=i;if(!n)return;let s=new Set(t),o=new Set(Object.keys(n)),l=new Set([...s].filter(u=>o.has(u)));l.size>1&&Q(e,`Conflicting options for directive: ["${[...l].join('", "')}"]`,{node:r,note:`Choose a single option out of ["${[...t].join('", "')}"]`,ruleId:N.directiveOptionsCorrect})}function Rt(i){var e;return(e={ts:"typescript",js:"javascript",mjs:"javascript",tex:"latex",py:"python",md:"markdown",yml:"yaml"}[i??""])!==null&&e!==void 0?e:i}function X(i,e,t,n){P(t,"Index entry definitions should not use :option: syntax",{node:n,note:`Replace ":${i}: ${e}" with "${i}: ${e}"`})}var Fe={name:"index",arg:{type:String},options:{single:{type:String},pair:{type:String},triple:{type:String},see:{type:String},seealso:{type:String,alias:["seeAlso","see-also"]},label:{type:String,alias:["name"]}},body:{type:String},run(i,e){var t,n,r,s,o,l;let u={single:[],pair:[],triple:[],see:[],seealso:[]};i.arg&&ue(i.arg,u,e,i.node),!((t=i.options)===null||t===void 0)&&t.single&&(X("single",i.options.single,e,i.node),u.single.push(i.options.single)),!((n=i.options)===null||n===void 0)&&n.pair&&(X("pair",i.options.pair,e,i.node),u.pair.push(i.options.pair)),!((r=i.options)===null||r===void 0)&&r.triple&&(X("triple",i.options.triple,e,i.node),u.triple.push(i.options.triple)),!((s=i.options)===null||s===void 0)&&s.see&&(X("see",i.options.see,e,i.node),u.see.push(i.options.see)),!((o=i.options)===null||o===void 0)&&o.seealso&&(X("seealso",i.options.seealso,e,i.node),u.seealso.push(i.options.seealso)),i.body&&i.body.split(`
`).forEach(d=>{ue(d,u,e,i.node)});let c=ve(u,e,i.node);return[{type:"mystTarget",label:(l=i.options)===null||l===void 0?void 0:l.label,indexEntries:c}]}},ke={name:"show-index",alias:["genindex"],arg:{type:"myst",doc:"Heading to be included in index block"},run(i){var e;let t=[];if(i.arg){let n=i.arg;((e=n[0])===null||e===void 0?void 0:e.type)==="heading"?t.push(...n):t.push({type:"heading",depth:1,children:n})}return[{type:"genindex",children:t}]}};var Be=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{},q=[],F=[],Nt=typeof Uint8Array<"u"?Uint8Array:Array,he=!1;function Pe(){he=!0;for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=i.length;e<t;++e)q[e]=i[e],F[i.charCodeAt(e)]=e;F["-".charCodeAt(0)]=62,F["_".charCodeAt(0)]=63}function Ft(i){he||Pe();var e,t,n,r,s,o,l=i.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=i[l-2]==="="?2:i[l-1]==="="?1:0,o=new Nt(l*3/4-s),n=s>0?l-4:l;var u=0;for(e=0,t=0;e<n;e+=4,t+=3)r=F[i.charCodeAt(e)]<<18|F[i.charCodeAt(e+1)]<<12|F[i.charCodeAt(e+2)]<<6|F[i.charCodeAt(e+3)],o[u++]=r>>16&255,o[u++]=r>>8&255,o[u++]=r&255;return s===2?(r=F[i.charCodeAt(e)]<<2|F[i.charCodeAt(e+1)]>>4,o[u++]=r&255):s===1&&(r=F[i.charCodeAt(e)]<<10|F[i.charCodeAt(e+1)]<<4|F[i.charCodeAt(e+2)]>>2,o[u++]=r>>8&255,o[u++]=r&255),o}function kt(i){return q[i>>18&63]+q[i>>12&63]+q[i>>6&63]+q[i&63]}function Bt(i,e,t){for(var n,r=[],s=e;s<t;s+=3)n=(i[s]<<16)+(i[s+1]<<8)+i[s+2],r.push(kt(n));return r.join("")}function Le(i){he||Pe();for(var e,t=i.length,n=t%3,r="",s=[],o=16383,l=0,u=t-n;l<u;l+=o)s.push(Bt(i,l,l+o>u?u:l+o));return n===1?(e=i[t-1],r+=q[e>>2],r+=q[e<<4&63],r+="=="):n===2&&(e=(i[t-2]<<8)+i[t-1],r+=q[e>>10],r+=q[e>>4&63],r+=q[e<<2&63],r+="="),s.push(r),s.join("")}function re(i,e,t,n,r){var s,o,l=r*8-n-1,u=(1<<l)-1,c=u>>1,f=-7,d=t?r-1:0,_=t?-1:1,y=i[e+d];for(d+=_,s=y&(1<<-f)-1,y>>=-f,f+=l;f>0;s=s*256+i[e+d],d+=_,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+i[e+d],d+=_,f-=8);if(s===0)s=1-c;else{if(s===u)return o?NaN:(y?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-c}return(y?-1:1)*o*Math.pow(2,s-n)}function Ve(i,e,t,n,r,s){var o,l,u,c=s*8-r-1,f=(1<<c)-1,d=f>>1,_=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:s-1,x=n?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+d>=1?e+=_/u:e+=_*Math.pow(2,1-d),e*u>=2&&(o++,u/=2),o+d>=f?(l=0,o=f):o+d>=1?(l=(e*u-1)*Math.pow(2,r),o=o+d):(l=e*Math.pow(2,d-1)*Math.pow(2,r),o=0));r>=8;i[t+y]=l&255,y+=x,l/=256,r-=8);for(o=o<<r|l,c+=r;c>0;i[t+y]=o&255,y+=x,o/=256,c-=8);i[t+y-x]|=g*128}var Lt={}.toString,Je=Array.isArray||function(i){return Lt.call(i)=="[object Array]"},Ut=50;a.TYPED_ARRAY_SUPPORT=Be.TYPED_ARRAY_SUPPORT!==void 0?Be.TYPED_ARRAY_SUPPORT:!0;te();function te(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function V(i,e){if(te()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(i=new Uint8Array(e),i.__proto__=a.prototype):(i===null&&(i=new a(e)),i.length=e),i}function a(i,e,t){if(!a.TYPED_ARRAY_SUPPORT&&!(this instanceof a))return new a(i,e,t);if(typeof i=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return pe(this,i)}return Ye(this,i,e,t)}a.poolSize=8192;a._augment=function(i){return i.__proto__=a.prototype,i};function Ye(i,e,t,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?Mt(i,e,t,n):typeof e=="string"?$t(i,e,t):Pt(i,e)}a.from=function(i,e,t){return Ye(null,i,e,t)};a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&a[Symbol.species]);function ze(i){if(typeof i!="number")throw new TypeError('"size" argument must be a number');if(i<0)throw new RangeError('"size" argument must not be negative')}function qt(i,e,t,n){return ze(e),e<=0?V(i,e):t!==void 0?typeof n=="string"?V(i,e).fill(t,n):V(i,e).fill(t):V(i,e)}a.alloc=function(i,e,t){return qt(null,i,e,t)};function pe(i,e){if(ze(e),i=V(i,e<0?0:me(e)|0),!a.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)i[t]=0;return i}a.allocUnsafe=function(i){return pe(null,i)};a.allocUnsafeSlow=function(i){return pe(null,i)};function $t(i,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!a.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=je(e,t)|0;i=V(i,n);var r=i.write(e,t);return r!==n&&(i=i.slice(0,r)),i}function de(i,e){var t=e.length<0?0:me(e.length)|0;i=V(i,t);for(var n=0;n<t;n+=1)i[n]=e[n]&255;return i}function Mt(i,e,t,n){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");return t===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,n),a.TYPED_ARRAY_SUPPORT?(i=e,i.__proto__=a.prototype):i=de(i,e),i}function Pt(i,e){if($(e)){var t=me(e.length)|0;return i=V(i,t),i.length===0||e.copy(i,0,0,t),i}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||si(e.length)?V(i,0):de(i,e);if(e.type==="Buffer"&&Je(e.data))return de(i,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function me(i){if(i>=te())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+te().toString(16)+" bytes");return i|0}a.isBuffer=k;function $(i){return!!(i!=null&&i._isBuffer)}a.compare=function(e,t){if(!$(e)||!$(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,s=0,o=Math.min(n,r);s<o;++s)if(e[s]!==t[s]){n=e[s],r=t[s];break}return n<r?-1:r<n?1:0};a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};a.concat=function(e,t){if(!Je(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return a.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),s=0;for(n=0;n<e.length;++n){var o=e[n];if(!$(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,s),s+=o.length}return r};function je(i,e){if($(i))return i.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(i)||i instanceof ArrayBuffer))return i.byteLength;typeof i!="string"&&(i=""+i);var t=i.length;if(t===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return ie(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Ke(i).length;default:if(n)return ie(i).length;e=(""+e).toLowerCase(),n=!0}}a.byteLength=je;function Vt(i,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(i||(i="utf8");;)switch(i){case"hex":return Zt(this,e,t);case"utf8":case"utf-8":return We(this,e,t);case"ascii":return Gt(this,e,t);case"latin1":case"binary":return Xt(this,e,t);case"base64":return Ht(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Kt(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),n=!0}}a.prototype._isBuffer=!0;function j(i,e,t){var n=i[e];i[e]=i[t],i[t]=n}a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)j(this,t,t+1);return this};a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)j(this,t,t+3),j(this,t+1,t+2);return this};a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)j(this,t,t+7),j(this,t+1,t+6),j(this,t+2,t+5),j(this,t+3,t+4);return this};a.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?We(this,0,e):Vt.apply(this,arguments)};a.prototype.equals=function(e){if(!$(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:a.compare(this,e)===0};a.prototype.inspect=function(){var e="",t=Ut;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};a.prototype.compare=function(e,t,n,r,s){if(!$(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),r===void 0&&(r=0),s===void 0&&(s=this.length),t<0||n>e.length||r<0||s>this.length)throw new RangeError("out of range index");if(r>=s&&t>=n)return 0;if(r>=s)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,s>>>=0,this===e)return 0;for(var o=s-r,l=n-t,u=Math.min(o,l),c=this.slice(r,s),f=e.slice(t,n),d=0;d<u;++d)if(c[d]!==f[d]){o=c[d],l=f[d];break}return o<l?-1:l<o?1:0};function Qe(i,e,t,n,r){if(i.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=r?0:i.length-1),t<0&&(t=i.length+t),t>=i.length){if(r)return-1;t=i.length-1}else if(t<0)if(r)t=0;else return-1;if(typeof e=="string"&&(e=a.from(e,n)),$(e))return e.length===0?-1:Ue(i,e,t,n,r);if(typeof e=="number")return e=e&255,a.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?r?Uint8Array.prototype.indexOf.call(i,e,t):Uint8Array.prototype.lastIndexOf.call(i,e,t):Ue(i,[e],t,n,r);throw new TypeError("val must be string, number or Buffer")}function Ue(i,e,t,n,r){var s=1,o=i.length,l=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(i.length<2||e.length<2)return-1;s=2,o/=2,l/=2,t/=2}function u(y,x){return s===1?y[x]:y.readUInt16BE(x*s)}var c;if(r){var f=-1;for(c=t;c<o;c++)if(u(i,c)===u(e,f===-1?0:c-f)){if(f===-1&&(f=c),c-f+1===l)return f*s}else f!==-1&&(c-=c-f),f=-1}else for(t+l>o&&(t=o-l),c=t;c>=0;c--){for(var d=!0,_=0;_<l;_++)if(u(i,c+_)!==u(e,_)){d=!1;break}if(d)return c}return-1}a.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};a.prototype.indexOf=function(e,t,n){return Qe(this,e,t,n,!0)};a.prototype.lastIndexOf=function(e,t,n){return Qe(this,e,t,n,!1)};function Jt(i,e,t,n){t=Number(t)||0;var r=i.length-t;n?(n=Number(n),n>r&&(n=r)):n=r;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var o=0;o<n;++o){var l=parseInt(e.substr(o*2,2),16);if(isNaN(l))return o;i[t+o]=l}return o}function Yt(i,e,t,n){return le(ie(e,i.length-t),i,t,n)}function He(i,e,t,n){return le(ri(e),i,t,n)}function zt(i,e,t,n){return He(i,e,t,n)}function jt(i,e,t,n){return le(Ke(e),i,t,n)}function Qt(i,e,t,n){return le(oi(e,i.length-t),i,t,n)}a.prototype.write=function(e,t,n,r){if(t===void 0)r="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")r=t,n=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(n)?(n=n|0,r===void 0&&(r="utf8")):(r=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-t;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return Jt(this,e,t,n);case"utf8":case"utf-8":return Yt(this,e,t,n);case"ascii":return He(this,e,t,n);case"latin1":case"binary":return zt(this,e,t,n);case"base64":return jt(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Qt(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}};a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ht(i,e,t){return e===0&&t===i.length?Le(i):Le(i.slice(e,t))}function We(i,e,t){t=Math.min(i.length,t);for(var n=[],r=e;r<t;){var s=i[r],o=null,l=s>239?4:s>223?3:s>191?2:1;if(r+l<=t){var u,c,f,d;switch(l){case 1:s<128&&(o=s);break;case 2:u=i[r+1],(u&192)===128&&(d=(s&31)<<6|u&63,d>127&&(o=d));break;case 3:u=i[r+1],c=i[r+2],(u&192)===128&&(c&192)===128&&(d=(s&15)<<12|(u&63)<<6|c&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:u=i[r+1],c=i[r+2],f=i[r+3],(u&192)===128&&(c&192)===128&&(f&192)===128&&(d=(s&15)<<18|(u&63)<<12|(c&63)<<6|f&63,d>65535&&d<1114112&&(o=d))}}o===null?(o=65533,l=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),r+=l}return Wt(n)}var qe=4096;function Wt(i){var e=i.length;if(e<=qe)return String.fromCharCode.apply(String,i);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,i.slice(n,n+=qe));return t}function Gt(i,e,t){var n="";t=Math.min(i.length,t);for(var r=e;r<t;++r)n+=String.fromCharCode(i[r]&127);return n}function Xt(i,e,t){var n="";t=Math.min(i.length,t);for(var r=e;r<t;++r)n+=String.fromCharCode(i[r]);return n}function Zt(i,e,t){var n=i.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var r="",s=e;s<t;++s)r+=ni(i[s]);return r}function Kt(i,e,t){for(var n=i.slice(e,t),r="",s=0;s<n.length;s+=2)r+=String.fromCharCode(n[s]+n[s+1]*256);return r}a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=a.prototype;else{var s=t-e;r=new a(s,void 0);for(var o=0;o<s;++o)r[o]=this[o+e]}return r};function C(i,e,t){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+e>t)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUIntLE=function(e,t,n){e=e|0,t=t|0,n||C(e,t,this.length);for(var r=this[e],s=1,o=0;++o<t&&(s*=256);)r+=this[e+o]*s;return r};a.prototype.readUIntBE=function(e,t,n){e=e|0,t=t|0,n||C(e,t,this.length);for(var r=this[e+--t],s=1;t>0&&(s*=256);)r+=this[e+--t]*s;return r};a.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]};a.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8};a.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]};a.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};a.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};a.prototype.readIntLE=function(e,t,n){e=e|0,t=t|0,n||C(e,t,this.length);for(var r=this[e],s=1,o=0;++o<t&&(s*=256);)r+=this[e+o]*s;return s*=128,r>=s&&(r-=Math.pow(2,8*t)),r};a.prototype.readIntBE=function(e,t,n){e=e|0,t=t|0,n||C(e,t,this.length);for(var r=t,s=1,o=this[e+--r];r>0&&(s*=256);)o+=this[e+--r]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*t)),o};a.prototype.readInt8=function(e,t){return t||C(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};a.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};a.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};a.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};a.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};a.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),re(this,e,!0,23,4)};a.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),re(this,e,!1,23,4)};a.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),re(this,e,!0,52,8)};a.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),re(this,e,!1,52,8)};function R(i,e,t,n,r,s){if(!$(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(t+n>i.length)throw new RangeError("Index out of range")}a.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t=t|0,n=n|0,!r){var s=Math.pow(2,8*n)-1;R(this,e,t,n,s,0)}var o=1,l=0;for(this[t]=e&255;++l<n&&(o*=256);)this[t+l]=e/o&255;return t+n};a.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t=t|0,n=n|0,!r){var s=Math.pow(2,8*n)-1;R(this,e,t,n,s,0)}var o=n-1,l=1;for(this[t+o]=e&255;--o>=0&&(l*=256);)this[t+o]=e/l&255;return t+n};a.prototype.writeUInt8=function(e,t,n){return e=+e,t=t|0,n||R(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function oe(i,e,t,n){e<0&&(e=65535+e+1);for(var r=0,s=Math.min(i.length-t,2);r<s;++r)i[t+r]=(e&255<<8*(n?r:1-r))>>>(n?r:1-r)*8}a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t|0,n||R(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):oe(this,e,t,!0),t+2};a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t|0,n||R(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):oe(this,e,t,!1),t+2};function se(i,e,t,n){e<0&&(e=4294967295+e+1);for(var r=0,s=Math.min(i.length-t,4);r<s;++r)i[t+r]=e>>>(n?r:3-r)*8&255}a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t|0,n||R(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):se(this,e,t,!0),t+4};a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t|0,n||R(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):se(this,e,t,!1),t+4};a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=t|0,!r){var s=Math.pow(2,8*n-1);R(this,e,t,n,s-1,-s)}var o=0,l=1,u=0;for(this[t]=e&255;++o<n&&(l*=256);)e<0&&u===0&&this[t+o-1]!==0&&(u=1),this[t+o]=(e/l>>0)-u&255;return t+n};a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=t|0,!r){var s=Math.pow(2,8*n-1);R(this,e,t,n,s-1,-s)}var o=n-1,l=1,u=0;for(this[t+o]=e&255;--o>=0&&(l*=256);)e<0&&u===0&&this[t+o+1]!==0&&(u=1),this[t+o]=(e/l>>0)-u&255;return t+n};a.prototype.writeInt8=function(e,t,n){return e=+e,t=t|0,n||R(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};a.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t|0,n||R(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):oe(this,e,t,!0),t+2};a.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t|0,n||R(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):oe(this,e,t,!1),t+2};a.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t|0,n||R(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):se(this,e,t,!0),t+4};a.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t|0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):se(this,e,t,!1),t+4};function Ge(i,e,t,n,r,s){if(t+n>i.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Xe(i,e,t,n,r){return r||Ge(i,e,t,4),Ve(i,e,t,n,23,4),t+4}a.prototype.writeFloatLE=function(e,t,n){return Xe(this,e,t,!0,n)};a.prototype.writeFloatBE=function(e,t,n){return Xe(this,e,t,!1,n)};function Ze(i,e,t,n,r){return r||Ge(i,e,t,8),Ve(i,e,t,n,52,8),t+8}a.prototype.writeDoubleLE=function(e,t,n){return Ze(this,e,t,!0,n)};a.prototype.writeDoubleBE=function(e,t,n){return Ze(this,e,t,!1,n)};a.prototype.copy=function(e,t,n,r){if(n||(n=0),!r&&r!==0&&(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var s=r-n,o;if(this===e&&n<t&&t<r)for(o=s-1;o>=0;--o)e[o+t]=this[o+n];else if(s<1e3||!a.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s};a.prototype.fill=function(e,t,n,r){if(typeof e=="string"){if(typeof t=="string"?(r=t,t=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{var l=$(e)?e:ie(new a(e,r).toString()),u=l.length;for(o=0;o<n-t;++o)this[o+t]=l[o%u]}return this};var ei=/[^+\/0-9A-Za-z-_]/g;function ti(i){if(i=ii(i).replace(ei,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function ii(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function ni(i){return i<16?"0"+i.toString(16):i.toString(16)}function ie(i,e){e=e||1/0;for(var t,n=i.length,r=null,s=[],o=0;o<n;++o){if(t=i.charCodeAt(o),t>55295&&t<57344){if(!r){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}r=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),r=t;continue}t=(r-55296<<10|t-56320)+65536}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function ri(i){for(var e=[],t=0;t<i.length;++t)e.push(i.charCodeAt(t)&255);return e}function oi(i,e){for(var t,n,r,s=[],o=0;o<i.length&&!((e-=2)<0);++o)t=i.charCodeAt(o),n=t>>8,r=t%256,s.push(r),s.push(n);return s}function Ke(i){return Ft(ti(i))}function le(i,e,t,n){for(var r=0;r<n&&!(r+t>=e.length||r>=i.length);++r)e[r+t]=i[r];return r}function si(i){return i!==i}function k(i){return i!=null&&(!!i._isBuffer||et(i)||li(i))}function et(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function li(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&et(i.slice(0,0))}var v=class extends Error{constructor(e,t,n,...r){Array.isArray(t)&&(t=t.join(" ").trim()),super(t),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,v),this.code=e;for(let s of r)for(let o in s){let l=s[o];this[o]=k(l)?l.toString(n.encoding):l==null?l:JSON.parse(JSON.stringify(l))}}},ai=function(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)},tt=function(i){let e=[];for(let t=0,n=i.length;t<n;t++){let r=i[t];if(r==null||r===!1)e[t]={disabled:!0};else if(typeof r=="string")e[t]={name:r};else if(ai(r)){if(typeof r.name!="string")throw new v("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${t}`,"when column is an object literal"]);e[t]=r}else throw new v("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(r)} at position ${t}`])}return e},ne=class{constructor(e=100){this.size=e,this.length=0,this.buf=a.allocUnsafe(e)}prepend(e){if(k(e)){let t=this.length+e.length;if(t>=this.size&&(this.resize(),t>=this.size))throw Error("INVALID_BUFFER_STATE");let n=this.buf;this.buf=a.allocUnsafe(this.size),e.copy(this.buf,0),n.copy(this.buf,e.length),this.length+=e.length}else{let t=this.length++;t===this.size&&this.resize();let n=this.clone();this.buf[0]=e,n.copy(this.buf,1,0,t)}}append(e){let t=this.length++;t===this.size&&this.resize(),this.buf[t]=e}clone(){return a.from(this.buf.slice(0,this.length))}resize(){let e=this.length;this.size=this.size*2;let t=a.allocUnsafe(this.size);this.buf.copy(t,0,0,e),this.buf=t}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}},ui=12,ci=13,fi=10,di=32,hi=9,pi=function(i){return{bomSkipped:!1,bufBytesStart:0,castField:i.cast_function,commenting:!1,error:void 0,enabled:i.from_line===1,escaping:!1,escapeIsQuote:k(i.escape)&&k(i.quote)&&a.compare(i.escape,i.quote)===0,expectedRecordLength:Array.isArray(i.columns)?i.columns.length:void 0,field:new ne(20),firstLineToHeaders:i.cast_first_line_to_header,needMoreDataSize:Math.max(i.comment!==null?i.comment.length:0,...i.delimiter.map(e=>e.length),i.quote!==null?i.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new ne(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:i.record_delimiter.length===0?0:Math.max(...i.record_delimiter.map(e=>e.length)),trimChars:[a.from(" ",i.encoding)[0],a.from("	",i.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[a.from(a.from([ci],"utf8").toString(),i.encoding),a.from(a.from([fi],"utf8").toString(),i.encoding),a.from(a.from([ui],"utf8").toString(),i.encoding),a.from(a.from([di],"utf8").toString(),i.encoding),a.from(a.from([hi],"utf8").toString(),i.encoding)]}},mi=function(i){return i.replace(/([A-Z])/g,function(e,t){return"_"+t.toLowerCase()})},$e=function(i){let e={};for(let n in i)e[mi(n)]=i[n];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new v("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new v("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new v("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(n){let r=Date.parse(n);return isNaN(r)?n:new Date(r)};else if(typeof e.cast_date!="function")throw new v("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=null,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=tt(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new v("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new v("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new v("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=a.from(e.comment,e.encoding)),!k(e.comment))throw new v("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);if(e.comment_no_infix===void 0||e.comment_no_infix===null||e.comment_no_infix===!1)e.comment_no_infix=!1;else if(e.comment_no_infix!==!0)throw new v("CSV_INVALID_OPTION_COMMENT",["Invalid option comment_no_infix:","value must be a boolean,",`got ${JSON.stringify(e.comment_no_infix)}`],e);let t=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new v("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],e);if(e.delimiter=e.delimiter.map(function(n){if(n==null||n===!1)return a.from(",",e.encoding);if(typeof n=="string"&&(n=a.from(n,e.encoding)),!k(n)||n.length===0)throw new v("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],e);return n}),e.escape===void 0||e.escape===!0?e.escape=a.from('"',e.encoding):typeof e.escape=="string"?e.escape=a.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!k(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(i.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(i.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(i.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new v("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new v("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(k(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new v("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.on_skip!==void 0&&e.on_skip!==null&&typeof e.on_skip!="function")throw new Error(`Invalid Option: on_skip must be a function, got ${JSON.stringify(e.on_skip)}`);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=a.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=a.from(e.quote,e.encoding)),!k(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||k(e.record_delimiter)){if(e.record_delimiter.length===0)throw new v("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new v("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(n,r){if(typeof n!="string"&&!k(n))throw new v("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${r},`,`got ${JSON.stringify(n)}`],e);if(n.length===0)throw new v("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${r},`,`got ${JSON.stringify(n)}`],e);return typeof n=="string"&&(n=a.from(n,e.encoding)),n}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&i.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&i.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(i.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(i.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(i.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(i.to_line)}`);return e},Me=function(i){return i.every(e=>e==null||e.toString&&e.toString().trim()==="")},gi=13,_i=10,H={utf8:a.from([239,187,191]),utf16le:a.from([255,254])},yi=function(i={}){let e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},t=$e(i);return{info:e,original_options:i,options:t,state:pi(t),__needMoreData:function(n,r,s){if(s)return!1;let{encoding:o,escape:l,quote:u}=this.options,{quoting:c,needMoreDataSize:f,recordDelimiterMaxLength:d}=this.state,_=r-n-1,y=Math.max(f,d===0?a.from(`\r
`,o).length:d,c?(l===null?0:l.length)+u.length:0,c?u.length+d:0);return _<y},parse:function(n,r,s,o){let{bom:l,comment_no_infix:u,encoding:c,from_line:f,ltrim:d,max_record_size:_,raw:y,relax_quotes:x,rtrim:g,skip_empty_lines:O,to:S,to_line:I}=this.options,{comment:w,escape:D,quote:A,record_delimiter:B}=this.options,{bomSkipped:W,previousBuf:L,rawBuffer:G,escapeIsQuote:vt}=this.state,b;if(L===void 0)if(n===void 0){o();return}else b=n;else L!==void 0&&n===void 0?b=L:b=a.concat([L,n]);if(W===!1)if(l===!1)this.state.bomSkipped=!0;else if(b.length<3){if(r===!1){this.state.previousBuf=b;return}}else{for(let E in H)if(H[E].compare(b,0,H[E].length)===0){let J=H[E].length;this.state.bufBytesStart+=J,b=b.slice(J),this.options=$e({...this.original_options,encoding:E}),{comment:w,escape:D,quote:A}=this.options;break}this.state.bomSkipped=!0}let ae=b.length,p;for(p=0;p<ae&&!this.__needMoreData(p,ae,r);p++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),I!==-1&&this.info.lines>I){this.state.stop=!0,o();return}this.state.quoting===!1&&B.length===0&&this.__autoDiscoverRecordDelimiter(b,p)&&(B=this.options.record_delimiter);let E=b[p];if(y===!0&&G.append(E),(E===gi||E===_i)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(D!==null&&this.state.quoting===!0&&this.__isEscape(b,p,E)&&p+D.length<ae)if(vt){if(this.__isQuote(b,p+D.length)){this.state.escaping=!0,p+=D.length-1;continue}}else{this.state.escaping=!0,p+=D.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(b,p))if(this.state.quoting===!0){let T=b[p+A.length],Y=g&&this.__isCharTrimable(b,p+A.length),M=w!==null&&this.__compareBytes(w,b,p+A.length,T),z=this.__isDelimiter(b,p+A.length,T),Z=B.length===0?this.__autoDiscoverRecordDelimiter(b,p+A.length):this.__isRecordDelimiter(T,b,p+A.length);if(D!==null&&this.__isEscape(b,p,E)&&this.__isQuote(b,p+D.length))p+=D.length-1;else if(!T||z||Z||M||Y){this.state.quoting=!1,this.state.wasQuoting=!0,p+=A.length-1;continue}else if(x===!1){let ge=this.__error(new v("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(T)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(ge!==void 0)return ge}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(A),p+=A.length-1}else if(this.state.field.length!==0){if(x===!1){let T=this.__infoField(),Y=Object.keys(H).map(z=>H[z].equals(this.state.field.toString())?z:!1).filter(Boolean)[0],M=this.__error(new v("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(T.column)} at line ${T.lines}, value is ${JSON.stringify(this.state.field.toString(c))}`,Y?`(${Y} bom)`:void 0],this.options,T,{field:this.state.field}));if(M!==void 0)return M}}else{this.state.quoting=!0,p+=A.length-1;continue}if(this.state.quoting===!1){let T=this.__isRecordDelimiter(E,b,p);if(T!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=f){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),p+=T-1;continue}if(O===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,p+=T-1;continue}this.info.bytes=this.state.bufBytesStart+p;let z=this.__onField();if(z!==void 0)return z;this.info.bytes=this.state.bufBytesStart+p+T;let Z=this.__onRecord(s);if(Z!==void 0)return Z;if(S!==-1&&this.info.records>=S){this.state.stop=!0,o();return}}this.state.commenting=!1,p+=T-1;continue}if(this.state.commenting)continue;if(w!==null&&(u===!1||this.state.record.length===0&&this.state.field.length===0)&&this.__compareBytes(w,b,p,E)!==0){this.state.commenting=!0;continue}let Y=this.__isDelimiter(b,p,E);if(Y!==0){this.info.bytes=this.state.bufBytesStart+p;let M=this.__onField();if(M!==void 0)return M;p+=Y-1;continue}}}if(this.state.commenting===!1&&_!==0&&this.state.record_length+this.state.field.length>_)return this.__error(new v("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${_}`,`at line ${this.info.lines}`],this.options,this.__infoField()));let J=d===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(b,p),wt=g===!1||this.state.wasQuoting===!1;if(J===!0&&wt===!0)this.state.field.append(E);else{if(g===!0&&!this.__isCharTrimable(b,p))return this.__error(new v("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));J===!1&&(p+=this.__isCharTrimable(b,p)-1);continue}}if(r===!0)if(this.state.quoting===!0){let E=this.__error(new v("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(E!==void 0)return E}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+p;let E=this.__onField();if(E!==void 0)return E;let J=this.__onRecord(s);if(J!==void 0)return J}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=p,this.state.previousBuf=b.slice(p);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(n){let{columns:r,group_columns_by_name:s,encoding:o,info:l,from:u,relax_column_count:c,relax_column_count_less:f,relax_column_count_more:d,raw:_,skip_records_with_empty_values:y}=this.options,{enabled:x,record:g}=this.state;if(x===!1)return this.__resetRecord();let O=g.length;if(r===!0){if(y===!0&&Me(g)){this.__resetRecord();return}return this.__firstLineToColumns(g)}if(r===!1&&this.info.records===0&&(this.state.expectedRecordLength=O),O!==this.state.expectedRecordLength){let S=r===!1?new v("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${O} on line ${this.info.lines}`],this.options,this.__infoField(),{record:g}):new v("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${r.length},`,`got ${O} on line ${this.info.lines}`],this.options,this.__infoField(),{record:g});if(c===!0||f===!0&&O<this.state.expectedRecordLength||d===!0&&O>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=S;else{let I=this.__error(S);if(I)return I}}if(y===!0&&Me(g)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,u===1||this.info.records>=u){let{objname:S}=this.options;if(r!==!1){let I={};for(let w=0,D=g.length;w<D;w++)r[w]===void 0||r[w].disabled||(s===!0&&I[r[w].name]!==void 0?Array.isArray(I[r[w].name])?I[r[w].name]=I[r[w].name].concat(g[w]):I[r[w].name]=[I[r[w].name],g[w]]:I[r[w].name]=g[w]);if(_===!0||l===!0){let w=Object.assign({record:I},_===!0?{raw:this.state.rawBuffer.toString(o)}:{},l===!0?{info:this.__infoRecord()}:{}),D=this.__push(S===void 0?w:[I[S],w],n);if(D)return D}else{let w=this.__push(S===void 0?I:[I[S],I],n);if(w)return w}}else if(_===!0||l===!0){let I=Object.assign({record:g},_===!0?{raw:this.state.rawBuffer.toString(o)}:{},l===!0?{info:this.__infoRecord()}:{}),w=this.__push(S===void 0?I:[g[S],I],n);if(w)return w}else{let I=this.__push(S===void 0?g:[g[S],g],n);if(I)return I}}this.__resetRecord()},__firstLineToColumns:function(n){let{firstLineToHeaders:r}=this.state;try{let s=r===void 0?n:r.call(null,n);if(!Array.isArray(s))return this.__error(new v("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(s)}`],this.options,this.__infoField(),{headers:s}));let o=tt(s);this.state.expectedRecordLength=o.length,this.options.columns=o,this.__resetRecord();return}catch(s){return s}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){let{cast:n,encoding:r,rtrim:s,max_record_size:o}=this.options,{enabled:l,wasQuoting:u}=this.state;if(l===!1)return this.__resetField();let c=this.state.field.toString(r);if(s===!0&&u===!1&&(c=c.trimRight()),n===!0){let[f,d]=this.__cast(c);if(f!==void 0)return f;c=d}this.state.record.push(c),o!==0&&typeof c=="string"&&(this.state.record_length+=c.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(n,r){let{on_record:s}=this.options;if(s!==void 0){let o=this.__infoRecord();try{n=s.call(null,n,o)}catch(l){return l}if(n==null)return}r(n)},__cast:function(n){let{columns:r,relax_column_count:s}=this.options;if(Array.isArray(r)===!0&&s&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{let l=this.__infoField();return[void 0,this.state.castField.call(null,n,l)]}catch(l){return[l]}if(this.__isFloat(n))return[void 0,parseFloat(n)];if(this.options.cast_date!==!1){let l=this.__infoField();return[void 0,this.options.cast_date.call(null,n,l)]}return[void 0,n]},__isCharTrimable:function(n,r){return((o,l)=>{let{timchars:u}=this.state;e:for(let c=0;c<u.length;c++){let f=u[c];for(let d=0;d<f.length;d++)if(f[d]!==o[l+d])continue e;return f.length}return 0})(n,r)},__isFloat:function(n){return n-parseFloat(n)+1>=0},__compareBytes:function(n,r,s,o){if(n[0]!==o)return 0;let l=n.length;for(let u=1;u<l;u++)if(n[u]!==r[s+u])return 0;return l},__isDelimiter:function(n,r,s){let{delimiter:o,ignore_last_delimiters:l}=this.options;if(l===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(l!==!1&&typeof l=="number"&&this.state.record.length===l-1)return 0;e:for(let u=0;u<o.length;u++){let c=o[u];if(c[0]===s){for(let f=1;f<c.length;f++)if(c[f]!==n[r+f])continue e;return c.length}}return 0},__isRecordDelimiter:function(n,r,s){let{record_delimiter:o}=this.options,l=o.length;e:for(let u=0;u<l;u++){let c=o[u],f=c.length;if(c[0]===n){for(let d=1;d<f;d++)if(c[d]!==r[s+d])continue e;return c.length}}return 0},__isEscape:function(n,r,s){let{escape:o}=this.options;if(o===null)return!1;let l=o.length;if(o[0]===s){for(let u=0;u<l;u++)if(o[u]!==n[r+u])return!1;return!0}return!1},__isQuote:function(n,r){let{quote:s}=this.options;if(s===null)return!1;let o=s.length;for(let l=0;l<o;l++)if(s[l]!==n[r+l])return!1;return!0},__autoDiscoverRecordDelimiter:function(n,r){let{encoding:s}=this.options,o=[a.from(`\r
`,s),a.from(`
`,s),a.from("\r",s)];e:for(let l=0;l<o.length;l++){let u=o[l].length;for(let c=0;c<u;c++)if(o[l][c]!==n[r+c])continue e;return this.options.record_delimiter.push(o[l]),this.state.recordDelimiterMaxLength=o[l].length,o[l].length}return 0},__error:function(n){let{encoding:r,raw:s,skip_records_with_error:o}=this.options,l=typeof n=="string"?new Error(n):n;if(o){this.state.recordHasError=!0,this.options.on_skip!==void 0&&this.options.on_skip(l,s?this.state.rawBuffer.toString(r):void 0);return}else return l},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){let{columns:n,raw:r,encoding:s}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:n===!0,index:this.state.record.length,raw:r?this.state.rawBuffer.toString(s):void 0}},__infoField:function(){let{columns:n}=this.options,r=Array.isArray(n);return{...this.__infoRecord(),column:r===!0?n.length>this.state.record.length?n[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}},it=function(i,e={}){typeof i=="string"&&(i=a.from(i));let t=e&&e.objname?{}:[],n=yi(e),r=u=>{n.options.objname===void 0?t.push(u):t[u[0]]=u[1]},s=()=>{},o=n.parse(i,!1,r,s);if(o!==void 0)throw o;let l=n.parse(void 0,!0,r,s);if(l!==void 0)throw l;return t};var rt={name:"table",arg:{type:"myst",doc:"An optional table caption"},options:{...m("table"),class:{type:String,doc:"CSS classes to add to your table. Special classes include:\n\n- `full-width`: changes the table environment to cover two columns in LaTeX"},align:{type:String}},body:{type:"myst",required:!0},run(i){let e=[];i.arg&&e.push({type:"caption",children:[{type:"paragraph",children:i.arg}]}),e.push(...i.body);let t={type:"container",kind:"table",children:e};return h(i,t),[t]}},ot={name:"list-table",arg:{type:"myst",doc:"An optional table caption"},options:{...m("list table"),"header-rows":{type:Number},class:{type:String,doc:"CSS classes to add to your table. Special classes include:\n\n- `full-width`: changes the table environment to cover two columns in LaTeX"},align:{type:String}},body:{type:"myst",required:!0},validate(i,e){var t;let n={...i},r=i.body;return r.length!==1||r[0].type!=="list"?(P(e,"list-table directive must have one list as body",{node:i.node,ruleId:N.directiveBodyCorrect}),n.body=[]):(t=r[0].children)===null||t===void 0||t.forEach(s=>{var o,l;n.body.length&&(s.type!=="listItem"||((o=s.children)===null||o===void 0?void 0:o.length)!==1||((l=s.children[0])===null||l===void 0?void 0:l.type)!=="list")&&(P(e,"list-table directive must have a list of lists",{node:i.node,ruleId:N.directiveBodyCorrect}),n.body=[])}),n},run(i){var e,t,n;let r=[];i.arg&&r.push({type:"caption",children:[{type:"paragraph",children:i.arg}]});let s=((e=i.body[0])===null||e===void 0?void 0:e.children)||[],o=((t=i.options)===null||t===void 0?void 0:t["header-rows"])||0,l={type:"table",align:(n=i.options)===null||n===void 0?void 0:n.align,children:s.map(c=>{var f,d;let y={type:"tableRow",children:(((d=(f=c.children)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.children)||[]).map(x=>({type:"tableCell",header:o>0?!0:void 0,children:x.children}))};return o-=1,y})};r.push(l);let u={type:"container",kind:"table",children:r};return h(i,u),[u]}};function nt(i,e,t){var n,r,s;let o=(n=t?.delim)!==null&&n!==void 0?n:",";return it(i,{delimiter:o==="tab"?"	":o==="space"?" ":o,ltrim:!t?.keepspace,escape:(r=t?.escape)!==null&&r!==void 0?r:'"',quote:(s=t?.quote)!==null&&s!==void 0?s:'"'}).map((u,c)=>u.map(f=>{let d=e.parseMyst(f,c);return U("*:root > paragraph:only-child",d)}))}var st={name:"csv-table",doc:'The "csv-table" directive is used to create a table from CSV (comma-separated values) data.',arg:{type:"myst",doc:"An optional table caption"},options:{...m("CSV table"),header:{type:String,doc:"Supplemental data for the table header, added independently of and before any header-rows from the main CSV data. Must use the same CSV format as the main CSV data."},"header-rows":{type:Number,doc:"The number of rows of CSV data to use in the table header. Defaults to 0."},class:{type:String,doc:"CSS classes to add to your table. Special classes include:\n\n- `full-width`: changes the table environment to cover two columns in LaTeX"},align:{type:String},delim:{type:String,doc:'The character used to separate data fields. The special values "tab" and "space" are converted to the respective whitespace characters. Defaults to "," (comma)'},keepspace:{type:Boolean,doc:"Treat whitespace immediately following the delimiter as significant. The default is to ignore such whitespace."},quote:{type:String,doc:'The character used to quote fields containing special characters, such as the delimiter, quotes, or new-line characters. Must be a single character, defaults to `"` (a double quote)\\\nFor example, `First cell, "These commas, for example, are escaped", Next cell`'},escape:{type:String,doc:'A character used to escape the delimiter or quote characters from the CSV parser. Must be a single character, defaults to `"` (a double quote) default is a double quote\\\nFor example, `First cell, "These quotes"", for example, are escaped", Next cell`'}},body:{type:String,doc:"The CSV content",required:!0},run(i,e,t){var n,r,s,o,l;let u=[];i.arg&&u.push({type:"caption",children:[{type:"paragraph",children:i.arg}]});let c=[];if(((n=i.options)===null||n===void 0?void 0:n.header)!==void 0){let x=[];try{x=nt(i.options.header,t,i.options)}catch{P(e,"csv-table directive header must be valid CSV-formatted MyST",{node:(r=U('mystDirectiveOption[name="header"]',i.node))!==null&&r!==void 0?r:i.node,ruleId:N.directiveOptionsCorrect})}c.push(...x.map(g=>({type:"tableRow",children:g.map(O=>{var S;return{type:"tableCell",header:!0,children:(S=O?.children)!==null&&S!==void 0?S:[]}})})))}let f=[];try{f=nt(i.body,t,i.options)}catch{P(e,"csv-table directive body must be valid CSV-formatted MyST",{node:(s=U("mystDirectiveBody",i.node))!==null&&s!==void 0?s:i.node,ruleId:N.directiveBodyCorrect})}let d=((o=i.options)===null||o===void 0?void 0:o["header-rows"])||0;c.push(...f.map(x=>{let g={type:"tableRow",children:x.map(O=>{var S;return{type:"tableCell",header:d>0?!0:void 0,children:(S=O?.children)!==null&&S!==void 0?S:[]}})};return d-=1,g}));let _={type:"table",align:(l=i.options)===null||l===void 0?void 0:l.align,children:c},y={type:"container",kind:"table",children:[...u,_]};return h(i,y),[y]}};var lt={name:"aside",alias:["margin","sidebar","topic"],arg:{type:"myst",doc:"An optional title"},options:{...m("aside")},body:{type:"myst",required:!0},run(i){let e=[...i.body];i.arg&&e.unshift({type:"admonitionTitle",children:i.arg});let t={type:"aside",kind:i.name=="aside"||i.name=="margin"?void 0:i.name,children:e};return h(i,t),[t]}};var at={name:"glossary",body:{type:"myst",required:!0},options:{...m("glossary")},run(i){let e={type:"glossary",children:i.body};return h(i,e),[e]}};var ut={name:"math",options:{...m("math")},body:{type:String,required:!0},run(i){let e=h(i,{type:"math",value:i.body});return i.node.tight&&(e.tight=i.node.tight),[e]}};var ct={name:"mdast",arg:{type:String,required:!0},options:{...m("mdast")},run(i){let e={type:"mdast",id:i.arg};return h(i,e),[e]}};var ft={name:"mermaid",options:{...m("mermaid")},body:{type:String,required:!0},run(i){return[h(i,{type:"mermaid",value:i.body})]}};var dt={name:"myst",options:{...m("myst"),numbering:{type:String}},body:{type:String,required:!0},run(i){var e;let t;if(!((e=i.options)===null||e===void 0)&&e.numbering)try{t=ee.load(i.options.numbering)}catch{}let n={type:"myst",numbering:t,value:i.body};return h(i,n),[n]}};var ht=bt(xt(),1);var pt={name:"blockquote",alias:["epigraph","pull-quote"],doc:"Block quotes are used to indicate that the enclosed content forms an extended quotation. They may be followed by an inscription or attribution formed of a paragraph beginning with `--`, `---`, or an em-dash.",options:{...m("blockquote"),class:{type:String,doc:"CSS classes to add to your blockquote. Special classes include:\n\n- `pull-quote`: used for a blockquote node which should attract attention\n- `epigraph`: used for a blockquote node that are usually found at the beginning of a document"}},body:{type:"myst",doc:"The body of the quote, which may contain a special attribution paragraph that is turned into a caption"},run(i){var e;let t=[];i.body&&t.push(...i.body);let n={type:"container",kind:"quote",children:[{type:"blockquote",children:t}]};h(i,n);let r=(e=i.options)===null||e===void 0?void 0:e.class;return n.class=(0,ht.default)({[r]:r,[i.name]:i.name!=="blockquote"}),[n]}};var mt={name:"raw",doc:'Allows you to include non-markdown text in your document. If the argument "latex" is provided, the text will be parsed as latex; otherwise, it will be included as raw text.',arg:{type:String,doc:'Format of directive content - for now, only "latex" is valid'},body:{type:String,doc:"Raw content to be parsed"},run(i){var e,t;let n=(e=i.arg)!==null&&e!==void 0?e:"",r=(t=i.body)!==null&&t!==void 0?t:"",s=["tex","latex"].includes(n)?`
${r}
`:void 0,o=["typst","typ"].includes(n)?`
${r}
`:void 0;return[{type:"raw",lang:n,tex:s,typst:o,value:r}]}},gt={name:"raw:latex",alias:["raw:tex"],doc:"Allows you to include tex in your document that will only be included in tex exports",body:{type:String,doc:"Raw tex content"},run(i){let e="tex",t=i.body,n=t?`
${t}
`:"";return[{type:"raw",lang:e,tex:n}]}},_t={name:"raw:typst",alias:["raw:typ"],doc:"Allows you to include typst in your document that will only be included in typst exports",body:{type:String,doc:"Raw typst content"},run(i){let e="typst",t=i.body,n=t?`
${t}
`:"";return[{type:"raw",lang:e,typst:n}]}};var yt={name:"div",options:{...m("div")},body:{type:"myst",required:!0},run(i){let e={type:"div",children:i.body};return h(i,e),[e]}};var Pn=[be,xe,st,Ie,De,Ee,Oe,pt,Ce,Te,Ae,Ne,Fe,ke,rt,ot,lt,at,ut,ct,ft,dt,mt,gt,_t,yt];export{m as a,h as b,Pn as c};
